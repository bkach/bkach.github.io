<!DOCTYPE html>
<html>
<head>
    <title>Income & Tax Calculator</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>
<body>
    <div class="container my-4">
        <h1 class="text-center mb-4">Income & Tax Calculator for Therapists</h1>
        <div class="form-group">
            <label for="sessionList">Session Prices:</label>
            <div id="sessionList"></div>
            <button class="btn btn-primary mt-2" id="addSession">Add Price</button>
        </div>
        <div class="form-group">
            <label for="clientsPerWeek">Clients per Week:</label>
            <input type="number" class="form-control" id="clientsPerWeek">
        </div>
        <div class="form-group">
            <label for="cancellationRate">Cancellation Rate (%):</label>
            <input type="number" class="form-control" id="cancellationRate" value="30">
        </div>
        <div class="form-group">
            <label for="daysOffPerYear">Days Off per Year:</label>
            <input type="number" class="form-control" id="daysOffPerYear">
        </div>
        <div class="form-group">
            <label for="taxRate">Tax Rate (%):</label>
            <input type="number" class="form-control" id="taxRate" value="30">
        </div>
        <button class="btn btn-success" id="calculate">Calculate</button>
        <h3 class="text-center my-4" id="result"></h3>
    </div>
    <script>
        let priceCount = 0;
        function addSessionPrice() {
            const sessionPrice = $('<input>', {
                type: 'number',
                id: `price${priceCount}`,
                placeholder: 'Price per session',
                class: 'form-control my-2'
            });
            const sessionAmount = $('<input>', {
                type: 'number',
                id: `amount${priceCount}`,
                placeholder: 'Amount at this price',
                class: 'form-control my-2'
            });
            $('#sessionList').append(sessionPrice, sessionAmount);
            priceCount++;
        }

        $(document).ready(function () {
            $('#addSession').on('click', function () {
                addSessionPrice();
            });

            $('#calculate').on('click', function () {
                let yearlyIncome = 0;
                let yearlyTax = 0;

                for (let i = 0; i < priceCount; i++) {
                    const price = parseFloat($(`#price${i}`).val()) || 0;
                    const amount = parseFloat($(`#amount${i}`).val()) || 0;
                    yearlyIncome += price * amount;
                }

                const clientsPerWeek = parseFloat($('#clientsPerWeek').val()) || 0;
                const cancellationRate = parseFloat($('#cancellationRate').val()) / 100 || 0;
                const daysOffPerYear = parseFloat($('#daysOffPerYear').val()) || 0;
                const taxRate = parseFloat($('#taxRate').val()) / 100 || 0;

                const weeksPerYear = 52 - (daysOffPerYear / 7);
                yearlyIncome *= clientsPerWeek * weeksPerYear * (1 - cancellationRate);
                yearlyTax = yearlyIncome * taxRate;

                $('#result').text(`Yearly Income: $${yearlyIncome.toFixed(2)}, Tax: $${yearlyTax.toFixed(2)}`);
            });
        });
    </script>
</body>
</html>
